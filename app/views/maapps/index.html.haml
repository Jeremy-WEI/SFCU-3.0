%h1.text-center Individual Account Applicants
%br
%br


%table.table.table-hover.col-md-12
  %tr
    %th.col-md-1.text-center
    %th.col-md-3.text-center Date Submitted
    %th.col-md-3.text-center Applicant
    %th.col-md-2.text-center Status
    %th.col-md-2.text-center
    %th.col-md-1.text-center
  - @maapps.each do |applicant|
    %tr{:class => "#{if applicant.application_status == 'Unprocessed' then 'active' elsif applicant.application_status == 'Processed' then 'success' else 'info' end}"}
      %td.text-center= check_box_tag 'exports[]', applicant.id, false, id: "exports_#{applicant.id}", form: "exports"
      %td.text-center= label_tag "exports_#{applicant.id}", applicant.created_at.strftime('%Y-%m-%d')
      %td.text-center= label_tag "exports_#{applicant.id}", applicant.first_name +   ' ' + applicant.last_name
      %td.text-center= form_for applicant do |f| f.select :application_status, options_for_select([ "Unprocessed", "Processed", "Hold" ], applicant.application_status), {}, :onchange => 'this.form.submit()' end
      -#%td= label_tag applicant.application_status
      %td.text-center= link_to 'Show', applicant
      -#%td= link_to 'Edit', edit_maapp_path(applicant)
      %td.text-center= link_to 'Destroy', applicant, :method => :delete, :data => { :confirm => 'Are you sure?' }
  %br
= form_tag url_for(:controller => 'maapps', :action => 'export'), method: 'get', name: "exports", id: "exports" do
  = submit_tag 'Export', id: "export_button", class: "btn btn-primary"

:javascript
  $(document).ready(function() {
    $('#export_button').click(function(){
      var lists = true;
      var checkboxes = document.getElementsByName('exports[]');
      for(var i = 0, n = checkboxes.length;i < n; i++) {
        if(checkboxes[i].checked) {
          lists = false;
          break;
        }
      }
      if(lists) {
        alert("No application selected");
      }
    }
    );
    //$("#status_2").change(function(){$(this).closest("form").submit()});
  });
